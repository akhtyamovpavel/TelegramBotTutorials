# Example 3: Reply Keyboard (–û–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏)

## –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç —Å Reply Keyboard - –æ–±—ã—á–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ–Ω—è—é—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- –ü–æ–¥–º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–∫–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

## –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Example 2 (Inline Keyboard)

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ:
1. **ReplyKeyboardMarkup** - –æ–±—ã—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–Ω–µ inline)
2. **KeyboardButton** - –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
3. **request_location** - –∑–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
4. **request_contact** - –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞
5. **ReplyKeyboardRemove** - —Å–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
6. **–§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–µ–∫—Å—Ç—É** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫

### –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è: Reply Keyboard vs Inline Keyboard

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Reply Keyboard | Inline Keyboard |
|----------------|----------------|-----------------|
| **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ** | –ó–∞–º–µ–Ω—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É | –ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º |
| **–û—Ç–ø—Ä–∞–≤–∫–∞** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç callback_data |
| **–ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ** | –û—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è | –û—Å—Ç–∞–µ—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º |
| **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å | –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ù–∞–≤–∏–≥–∞—Ü–∏—è, –º–µ–Ω—é | –î–µ–π—Å—Ç–≤–∏—è, –≤—ã–±–æ—Ä |

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Reply Keyboard?

‚úÖ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- –ì–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –±–æ—Ç–∞
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ß–∞—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ó–∞–ø—Ä–æ—Å–∞ –ª–æ–∫–∞—Ü–∏–∏/–∫–æ–Ω—Ç–∞–∫—Ç–∞

‚ùå **–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- –î–µ–π—Å—Ç–≤–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –æ–ø—Ü–∏–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ –∂–µ
pip install aiogram
# –∏–ª–∏
pip install python-telegram-bot
```

## –ó–∞–ø—É—Å–∫

```bash
export BOT_TOKEN="your_bot_token_here"

# aiogram
python examples/example_05_reply_keyboard/aiogram/bot.py

# python-telegram-bot
python examples/example_05_reply_keyboard/python_telegram_bot/bot.py
```

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ ReplyKeyboard

**aiogram:**
```python
keyboard = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 1"), KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 2")],
        [KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 3")]
    ],
    resize_keyboard=True,
    one_time_keyboard=False
)
```

**python-telegram-bot:**
```python
keyboard = [
    [KeyboardButton("–ö–Ω–æ–ø–∫–∞ 1"), KeyboardButton("–ö–Ω–æ–ø–∫–∞ 2")],
    [KeyboardButton("–ö–Ω–æ–ø–∫–∞ 3")]
]
reply_markup = ReplyKeyboardMarkup(
    keyboard,
    resize_keyboard=True,
    one_time_keyboard=False
)
```

### 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ReplyKeyboardMarkup

- **resize_keyboard** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫
- **one_time_keyboard** - —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
- **input_field_placeholder** - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
- **selective** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

**–ó–∞–ø—Ä–æ—Å –ª–æ–∫–∞—Ü–∏–∏:**
```python
KeyboardButton(text="üìç –õ–æ–∫–∞—Ü–∏—è", request_location=True)
```

**–ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞:**
```python
KeyboardButton(text="üì± –ö–æ–Ω—Ç–∞–∫—Ç", request_contact=True)
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π

**aiogram** (—á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä—ã):
```python
@router.message(F.text == "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
async def show_stats(message: Message):
    await message.answer("–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
```

**python-telegram-bot** (—á–µ—Ä–µ–∑ Regex):
```python
application.add_handler(
    MessageHandler(filters.Regex("^üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞$"), show_stats)
)
```

### 5. –°–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

–û–±–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```python
await message.reply_text(
    "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã—Ç–∞",
    reply_markup=ReplyKeyboardRemove()
)
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è

**aiogram:**
```python
@router.message(F.location)
async def handle_location(message: Message):
    lat = message.location.latitude
    lon = message.location.longitude
```

**python-telegram-bot:**
```python
application.add_handler(
    MessageHandler(filters.LOCATION, handle_location)
)
```

### –ö–æ–Ω—Ç–∞–∫—Ç

**aiogram:**
```python
@router.message(F.contact)
async def handle_contact(message: Message):
    phone = message.contact.phone_number
    name = message.contact.first_name
```

**python-telegram-bot:**
```python
application.add_handler(
    MessageHandler(filters.CONTACT, handle_contact)
)
```

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –º–µ–Ω—é

```python
# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
main_keyboard = ReplyKeyboardMarkup(...)

# –ü–æ–¥–º–µ–Ω—é
settings_keyboard = ReplyKeyboardMarkup(...)

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –º–µ–Ω—é
await message.answer("–ù–∞—Å—Ç—Ä–æ–π–∫–∏", reply_markup=settings_keyboard)
await message.answer("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=main_keyboard)
```

### 2. –£—Å–ª–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

```python
def get_user_keyboard(is_premium: bool):
    buttons = [
        [KeyboardButton("üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")],
        [KeyboardButton("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏")]
    ]

    if is_premium:
        buttons.append([KeyboardButton("üëë Premium —Ñ—É–Ω–∫—Ü–∏–∏")])

    return ReplyKeyboardMarkup(keyboard=buttons, resize_keyboard=True)
```

### 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```python
def get_category_keyboard(categories: list[str]):
    keyboard = []
    row = []

    for i, category in enumerate(categories):
        row.append(KeyboardButton(category))

        # –ü–æ 2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥
        if (i + 1) % 2 == 0:
            keyboard.append(row)
            row = []

    if row:  # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞—Ç–æ–∫
        keyboard.append(row)

    return ReplyKeyboardMarkup(keyboard=keyboard, resize_keyboard=True)
```

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–Ω–æ–ø–æ–∫ —Å –ª–æ–∫–∞—Ü–∏–µ–π/–∫–æ–Ω—Ç–∞–∫—Ç–æ–º:
- –û–±—ä—è—Å–Ω—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∑–∞—á–µ–º –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ
- –•—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –°–æ–±–ª—é–¥–∞–π—Ç–µ GDPR –∏ –¥—Ä—É–≥–∏–µ –∑–∞–∫–æ–Ω—ã

### ‚ö†Ô∏è UX —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ** - –º–∞–∫—Å–∏–º—É–º 3-4 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º–æ–¥–∑–∏** - –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
3. **–õ–æ–≥–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ä—è–¥–æ–º
4. **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"** - –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É –º–µ–Ω—é
5. **–ö–æ–º–∞–Ω–¥–∞ /hide** - –¥–∞–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

### ‚ö†Ô∏è –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (PTB)

–í python-telegram-bot –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```python
# –°–Ω–∞—á–∞–ª–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
application.add_handler(MessageHandler(filters.Regex("^üìä$"), stats))

# –ü–æ—Ç–æ–º –æ–±—â–∏–µ
application.add_handler(MessageHandler(filters.TEXT, handle_text))
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ê—Å–ø–µ–∫—Ç | aiogram | python-telegram-bot |
|--------|---------|---------------------|
| **–°–æ–∑–¥–∞–Ω–∏–µ** | `keyboard=[[...]]` | –°–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞** | `F.text == "..."` | `filters.Regex("^...$")` |
| **–§–∏–ª—å—Ç—Ä—ã** | Magic Filter `F` | –ú–æ–¥—É–ª—å `filters` |
| **–õ–æ–∫–∞—Ü–∏—è** | `F.location` | `filters.LOCATION` |
| **–ö–æ–Ω—Ç–∞–∫—Ç** | `F.contact` | `filters.CONTACT` |

## –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Inline Keyboard

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ —Ç–∏–ø–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

```python
# Reply Keyboard - –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
reply_kb = ReplyKeyboardMarkup(...)
await message.answer("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=reply_kb)

# Inline Keyboard - –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
inline_kb = InlineKeyboardMarkup(...)
await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é", reply_markup=inline_kb)
```

## Best Practices

1. **–û–¥–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞** - –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ reply keyboard –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
2. **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"** - –≤—Å–µ–≥–¥–∞ –≤ –ø–æ–¥–º–µ–Ω—é
3. **–¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫** - –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ
4. **Responsive** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `resize_keyboard=True`
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
