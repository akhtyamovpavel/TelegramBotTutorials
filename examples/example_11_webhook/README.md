# Example 11: –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ WebHook

## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ

–í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö (1-10) –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **polling** - –±–æ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç Telegram API –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–ù–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- **WebHook** - Telegram —Å–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- **Production deployment** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –±–æ—Ç–∞
- **SSL/HTTPS** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **Reverse proxy** - nginx –ø–µ—Ä–µ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞

## üìö Polling vs WebHook

### Polling (–ø—Ä–∏–º–µ—Ä—ã 1-10)

```python
# –ë–æ—Ç –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç Telegram –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥
while True:
    updates = bot.get_updates()  # –ó–∞–ø—Ä–æ—Å –∫ Telegram API
    process(updates)
    time.sleep(1)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å - –Ω–µ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π IP
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API (–Ω–∞–≥—Ä—É–∑–∫–∞)
- ‚ùå –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ùå –ü–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production

### WebHook (—ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä)

```python
# Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
@app.post("/webhook")
async def webhook(update: Update):
    await process(update)
    return {"ok": True}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API –∏ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ Production-ready
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ù—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω —Å HTTPS
- ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ localhost

## üìä –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ?

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------------|
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | Polling |
| **–õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä** | Polling |
| **Production —Å–µ—Ä–≤–µ—Ä** | WebHook |
| **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (>1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)** | WebHook |
| **–ù–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ** | WebHook |

## üîß –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è WebHook

1. **–ü—É–±–ª–∏—á–Ω—ã–π IP –∏–ª–∏ –¥–æ–º–µ–Ω**
   - ‚úÖ example.com
   - ‚úÖ bot.example.com
   - ‚ùå localhost
   - ‚ùå 192.168.x.x

2. **HTTPS —Å –≤–∞–ª–∏–¥–Ω—ã–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º**
   - ‚úÖ Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - ‚úÖ Cloudflare (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - ‚ùå Self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –ø–æ—Ä—Ç**
   - ‚úÖ 443 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTPS)
   - ‚úÖ 80, 88, 8443 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ)
   - ‚ùå –î—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è Telegram

4. **–í–µ–±-—Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
   - nginx –∏–ª–∏ Apache –∫–∞–∫ reverse proxy
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç SSL
   - –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–º–µ—Ä–∞

```
example_11_webhook/
‚îú‚îÄ‚îÄ README.md                          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ DEPLOYMENT.md                      # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
‚îú‚îÄ‚îÄ COMPARISON.md                      # –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ polling vs webhook
‚îú‚îÄ‚îÄ aiogram/
‚îÇ   ‚îú‚îÄ‚îÄ bot_webhook.py                 # –ë–æ—Ç –Ω–∞ aiogram —Å webhook
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ python_telegram_bot/
‚îÇ   ‚îú‚îÄ‚îÄ bot_webhook.py                 # –ë–æ—Ç –Ω–∞ python-telegram-bot
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ nginx_config/
‚îÇ   ‚îú‚îÄ‚îÄ simple.conf                    # –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
‚îÇ   ‚îî‚îÄ‚îÄ advanced.conf                  # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ docker/
    ‚îú‚îÄ‚îÄ Dockerfile                     # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ docker-compose.yml             # Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞
    ‚îî‚îÄ‚îÄ nginx.conf                     # Nginx –≤ Docker
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å ngrok)

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
cd aiogram
pip install -r requirements.txt
export BOT_TOKEN="your_token_here"
python bot_webhook.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –°–æ–∑–¥–∞–π—Ç–µ —Ç—É–Ω–Ω–µ–ª—å
ngrok http 8000

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL –∏–∑ ngrok (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok-free.app)
# –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç webhook
```

### Production (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git clone <repo>
cd example_11_webhook

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r aiogram/requirements.txt

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export BOT_TOKEN="your_token_here"
export WEBHOOK_URL="https://your-domain.com/webhook"
export WEBHOOK_PATH="/webhook"
export WEBAPP_HOST="0.0.0.0"
export WEBAPP_PORT="8000"

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx (—Å–º. nginx_config/)
sudo cp nginx_config/simple.conf /etc/nginx/sites-available/bot
sudo ln -s /etc/nginx/sites-available/bot /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx

# 5. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d your-domain.com

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python aiogram/bot_webhook.py
```

## üê≥ Docker Deployment

```bash
cd docker
docker-compose up -d
```

–°–º. [DEPLOYMENT.md](./DEPLOYMENT.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç WebHook?

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è webhook

```python
# –ë–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç Telegram –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
await bot.set_webhook(
    url="https://your-domain.com/webhook",
    drop_pending_updates=True
)
```

### 2. Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```
User ‚Üí Telegram ‚Üí HTTPS POST ‚Üí Your Server ‚Üí Bot
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```python
@app.post("/webhook")
async def webhook_handler(update: Update):
    # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    await dp.feed_update(bot, update)
    return Response(status_code=200)
```

### 4. –û—Ç–≤–µ—Ç Telegram

–ë–æ—Ç **–æ–±—è–∑–∞–Ω** –æ—Ç–≤–µ—Ç–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥:
- `200 OK` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- `4xx/5xx` - –æ—à–∏–±–∫–∞, Telegram –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å

## üìã Checklist –¥–ª—è WebHook

- [ ] –ï—Å—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω —Å HTTPS
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω (–Ω–µ self-signed)
- [ ] –ü–æ—Ä—Ç 443 –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π
- [ ] Firewall —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [ ] Webhook URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ secret token

```python
# –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ webhook —É–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω
await bot.set_webhook(
    url="https://your-domain.com/webhook",
    secret_token="your_secret_here"
)

# –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω
if request.headers.get("X-Telegram-Bot-Api-Secret-Token") != SECRET_TOKEN:
    return Response(status_code=403)
```

### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

```nginx
# nginx.conf - —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ IP Telegram
location /webhook {
    allow 149.154.160.0/20;
    allow 91.108.4.0/22;
    deny all;

    proxy_pass http://localhost:8000;
}
```

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **[DEPLOYMENT.md](./DEPLOYMENT.md)** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **[COMPARISON.md](./COMPARISON.md)** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ polling vs webhook
- **[nginx_config/](./nginx_config/)** - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π nginx
- **[docker/](./docker/)** - Docker –∏ Docker Compose –ø—Ä–∏–º–µ—Ä—ã

## üéì –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–ó–∞–¥–∞–Ω–∏–µ:**
1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –±–æ—Ç–∞ —Å webhook –Ω–∞ VPS (DigitalOcean, Linode, Hetzner)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx –∫–∞–∫ reverse proxy
3. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Let's Encrypt
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –î–æ–±–∞–≤—å—Ç–µ systemd service –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

**–û—Ç—á–µ—Ç –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å:**
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –±–æ—Ç–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (nginx, systemd)
- –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã webhook
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã `curl` –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ webhook URL

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Bot API - Using Webhook](https://core.telegram.org/bots/api#setwebhook)
- [Telegram Bot API - IP Ranges](https://core.telegram.org/bots/webhooks#the-short-version)
- [Let's Encrypt](https://letsencrypt.org/)
- [Nginx Documentation](https://nginx.org/en/docs/)
- [Docker Documentation](https://docs.docker.com/)

## üí° –°–æ–≤–µ—Ç—ã

1. **–ù–∞—á–Ω–∏—Ç–µ —Å ngrok** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx** - –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ –±–æ—Ç –Ω–∞–ø—Ä—è–º—É—é –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å—ë** - —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –ø—Ä–æ–±–ª–µ–º
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ healthcheck endpoint

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook info
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo

# –£–¥–∞–ª–∏—Ç–µ webhook
curl https://api.telegram.org/bot<TOKEN>/deleteWebhook

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
curl -X POST https://api.telegram.org/bot<TOKEN>/setWebhook \
  -d url=https://your-domain.com/webhook
```

### SSL –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect your-domain.com:443

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
echo | openssl s_client -servername your-domain.com -connect your-domain.com:443 2>/dev/null | openssl x509 -noout -dates
```

### Nginx –Ω–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log
```
